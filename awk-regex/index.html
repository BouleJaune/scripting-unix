
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../perl-ruby/">
      
      
        <link rel="next" href="../modularite/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.29">
    
    
      
        <title>Awk et regex - Scripting Unix</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.76a95c52.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9.5A2.5 2.5 0 0 0 9.5 12a2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 12 9.5m0 3.5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m0-3.5A2.5 2.5 0 0 0 9.5 12a2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 12 9.5m0 3.5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m0-11A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m0 14c-2.63 0-5-1.57-6-4a6.505 6.505 0 0 1 8.5-3.5A6.52 6.52 0 0 1 18 12c-1 2.43-3.37 4-6 4m0-6.5A2.5 2.5 0 0 0 9.5 12a2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 12 9.5m0 3.5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1Z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Awk et regex - Scripting Unix" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="./assets/images/social/awk-regex.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="None" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Awk et regex - Scripting Unix" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="./assets/images/social/awk-regex.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="cyan" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction-a-awk-et-aux-regex" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href=".." title="Scripting Unix" class="md-header__button md-logo" aria-label="Scripting Unix" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Scripting Unix
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Awk et regex
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Scripting Unix" class="md-nav__button md-logo" aria-label="Scripting Unix" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Scripting Unix
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Shell
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Shell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell/cheatsheet-shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheatsheet Shell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../shell/tp-shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Travaux Pratique Shell
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../python/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Python
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../perl-ruby/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perl et Ruby
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Awk et regex
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Awk et regex
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#awk" class="md-nav__link">
    <span class="md-ellipsis">
      Awk
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Awk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables-par-defaut" class="md-nav__link">
    <span class="md-ellipsis">
      Variables par défaut
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imprimer-des-colonnes-specifiques" class="md-nav__link">
    <span class="md-ellipsis">
      Imprimer des Colonnes Spécifiques
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtrer-par-motif" class="md-nav__link">
    <span class="md-ellipsis">
      Filtrer par Motif
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calculs-et-operations-sur-les-champs" class="md-nav__link">
    <span class="md-ellipsis">
      Calculs et Opérations sur les Champs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mots-cles-begin-et-end" class="md-nav__link">
    <span class="md-ellipsis">
      Mots clés BEGIN et END
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fonctions-integrees" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctions Intégrées
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#regex" class="md-nav__link">
    <span class="md-ellipsis">
      Regex
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Regex">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regex-sur-unix" class="md-nav__link">
    <span class="md-ellipsis">
      Regex sur Unix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regex-en-python" class="md-nav__link">
    <span class="md-ellipsis">
      Regex en Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regex-en-perl" class="md-nav__link">
    <span class="md-ellipsis">
      Regex en Perl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regex-en-ruby" class="md-nav__link">
    <span class="md-ellipsis">
      Regex en Ruby
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../modularite/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modularité
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../parallelisme/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parallelisme
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#awk" class="md-nav__link">
    <span class="md-ellipsis">
      Awk
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Awk">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#variables-par-defaut" class="md-nav__link">
    <span class="md-ellipsis">
      Variables par défaut
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imprimer-des-colonnes-specifiques" class="md-nav__link">
    <span class="md-ellipsis">
      Imprimer des Colonnes Spécifiques
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filtrer-par-motif" class="md-nav__link">
    <span class="md-ellipsis">
      Filtrer par Motif
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calculs-et-operations-sur-les-champs" class="md-nav__link">
    <span class="md-ellipsis">
      Calculs et Opérations sur les Champs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mots-cles-begin-et-end" class="md-nav__link">
    <span class="md-ellipsis">
      Mots clés BEGIN et END
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fonctions-integrees" class="md-nav__link">
    <span class="md-ellipsis">
      Fonctions Intégrées
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#regex" class="md-nav__link">
    <span class="md-ellipsis">
      Regex
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Regex">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regex-sur-unix" class="md-nav__link">
    <span class="md-ellipsis">
      Regex sur Unix
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regex-en-python" class="md-nav__link">
    <span class="md-ellipsis">
      Regex en Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regex-en-perl" class="md-nav__link">
    <span class="md-ellipsis">
      Regex en Perl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#regex-en-ruby" class="md-nav__link">
    <span class="md-ellipsis">
      Regex en Ruby
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="introduction-a-awk-et-aux-regex">Introduction à <code>awk</code> et aux Regex</h1>
<h2 id="awk">Awk</h2>
<p><code>awk</code> est un puissant langage de programmation et un utilitaire en ligne de commande dans les systèmes Unix et Linux. Il est conçu pour la manipulation de texte et le traitement de données basées sur des fichiers texte ou des flux d'entrée. <code>awk</code> permet de rechercher des motifs, extraire et transformer des données.</p>
<p>Les fichiers de tests sont récupérables ici :</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a>curl<span class="w"> </span>fichier.txt<span class="w"> </span>numbers.txt
</span></code></pre></div></td></tr></table></div>
<p>Ils ont étés générés pour <code>numbers.txt</code> avec :
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span>
<span class="normal"><a href="#__codelineno-1-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a>awk<span class="w"> </span><span class="s1">&#39;BEGIN { for (i = 1; i&lt;= 10; i++) print int(100*rand()),  int(100*rand()), int(100*rand()) }&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>numbers.txt
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="sb">`</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="c1">### Structure de Commande</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5"></a>La<span class="w"> </span>syntaxe<span class="w"> </span>de<span class="w"> </span>base<span class="w"> </span>de<span class="w"> </span><span class="sb">``</span>awk<span class="sb">``</span><span class="w"> </span>est<span class="w"> </span>la<span class="w"> </span>suivante<span class="w"> </span>:
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="sb">```</span>bash
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7"></a>awk<span class="w"> </span><span class="s1">&#39;pattern { action }&#39;</span><span class="w"> </span>fichier
</span></code></pre></div></td></tr></table></div></p>
<ul>
<li>pattern : Un motif qui, s'il est vrai pour une ligne donnée, déclenche l'exécution de l'action.</li>
<li>action : Une série d'instructions entre {} qui sont exécutées lorsque le motif est trouvé.</li>
</ul>
<h3 id="variables-par-defaut">Variables par défaut</h3>
<p>Awk fournit une liste de variables déjà initialisées, en voici une partie: </p>
<ul>
<li><code>NR</code> : Numéro de ligne global (cumulé à travers tous les fichiers d'entrée (Number of Rows).</li>
<li><code>$0</code> : La ligne entière actuelle.</li>
<li><code>$1</code>, <code>$2</code>, ..., <code>$n</code> : Les n-ièmes champs d'une ligne, où le séparateur de champs par défaut est l'espace ou la tabulation.</li>
<li><code>FS</code> : Le séparateur de champs (par défaut, espace ou tabulation).</li>
<li><code>OFS</code> : Le séparateur de champs de sortie (par défaut, espace).</li>
<li><code>RS</code> : Le séparateur d'enregistrements (par défaut, nouvelle ligne).</li>
<li><code>ORS</code> : Le séparateur d'enregistrements de sortie (par défaut, nouvelle ligne).</li>
<li><code>FNR</code> : Le numéro de ligne actuel dans le fichier d'entrée actuel (File Number of Rows).</li>
<li><code>NF</code> : Le nombre de champs dans la ligne courante (Number of Fields).</li>
<li><code>FILENAME</code> : Le nom du fichier d'entrée actuel.</li>
</ul>
<p>On peut changer le délimiteur par défaut avec <code>-F</code>, <code>-F,</code> utilisera <code>,</code> comme délimiteur au lieu de tab ou espace.</p>
<p>Awk permet aussi de déclarer ses propres variables dans les actions :</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a>awk<span class="w"> </span><span class="s1">&#39;{ n = 0; print n}&#39;</span><span class="w"> </span>fichier.txt
</span></code></pre></div></td></tr></table></div>
<h3 id="imprimer-des-colonnes-specifiques">Imprimer des Colonnes Spécifiques</h3>
<p>Pour imprimer le premier et le troisième champ de chaque ligne d'un fichier :</p>
<p><div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a>awk<span class="w"> </span><span class="s1">&#39;{ print $1, $3 }&#39;</span><span class="w"> </span>fichier.txt
</span></code></pre></div></td></tr></table></div>
Si aucun pattern n'est fourni alors <code>awk</code> matchera chaque ligne.</p>
<p>On peut fournir plusieurs commandes à awk en lui fournissant d'autres patterns et actions.</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a>awk<span class="w"> </span><span class="s1">&#39;{ print $1, $3 } { print $5 }&#39;</span><span class="w"> </span>fichier.txt
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="c1"># Ou bien en séparant sur plusieurs lignes :</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a>awk<span class="w"> </span><span class="s1">&#39;{ print $1, $3 } \</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="s1">{ print $5 }&#39;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6"></a>fichier.txt
</span></code></pre></div></td></tr></table></div>
<h3 id="filtrer-par-motif">Filtrer par Motif</h3>
<p>Pour afficher les lignes contenant le mot "Erreur" :</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a>awk<span class="w"> </span><span class="s1">&#39;/ERROR/ { print $0 }&#39;</span><span class="w"> </span>fichier.txt
</span></code></pre></div></td></tr></table></div>
<h3 id="calculs-et-operations-sur-les-champs">Calculs et Opérations sur les Champs</h3>
<p>Pour calculer la somme des valeurs des troisième et quatrième champs de chaque ligne:</p>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a>awk<span class="w"> </span><span class="s1">&#39;{ somme = $1 + $2; print somme }&#39;</span><span class="w"> </span>numbers.txt
</span></code></pre></div></td></tr></table></div>
<h3 id="mots-cles-begin-et-end">Mots clés BEGIN et END</h3>
<p><code>BEGIN { action }</code> permet d'exécuter une action avant la lecture de la première ligne. De manière symétrique <code>END { action }</code> permet d'éxécuter une action après la lecture de la dernière ligne.</p>
<div class="language-sh highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span>
<span class="normal"><a href="#__codelineno-7-2">2</a></span>
<span class="normal"><a href="#__codelineno-7-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a>awk<span class="w"> </span><span class="s1">&#39;BEGIN { print &quot;Début de traitement&quot; } \</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="s1">/ERROR/ { print $0 } \</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="s1">END { print &quot;Fin de traitement&quot; }&#39;</span><span class="w"> </span>fichier.txt
</span></code></pre></div></td></tr></table></div>
<div class="language-bash highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="c1"># Somme de la première colonne</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2"></a>awk<span class="w"> </span><span class="s1">&#39;BEGIN {n=0} {n += $1} END {print n}&#39;</span><span class="w"> </span>numbers.txt
</span></code></pre></div></td></tr></table></div>
<h3 id="fonctions-integrees">Fonctions Intégrées</h3>
<ul>
<li><strong><code>length([string])</code></strong> : Renvoie la longueur d'une chaîne ou du champ courant.</li>
<li><strong><code>substr(string, start, length)</code></strong> : Extrait une sous-chaîne de <code>string</code> à partir de <code>start</code> sur <code>length</code> caractères.</li>
<li><strong><code>tolower(string)</code></strong> : Convertit la chaîne en minuscules.</li>
<li><strong><code>toupper(string)</code></strong> : Convertit la chaîne en majuscules.</li>
<li><strong><code>split(string, array, [separator])</code></strong> : Divise <code>string</code> en éléments dans <code>array</code>, séparés par <code>separator</code>.</li>
<li><strong><code>match(string, regex)</code></strong> : Renvoie l'indice de départ et la longueur de la correspondance de <code>regex</code> dans <code>string</code>.</li>
<li><strong><code>gsub(regex, replacement, [target])</code></strong> : Remplace toutes les occurrences de <code>regex</code> par <code>replacement</code> dans <code>target</code> (ou <code>$0</code> si omis).</li>
<li><strong><code>sub(regex, replacement, [target])</code></strong> : Remplace la première occurrence de <code>regex</code> par <code>replacement</code> dans <code>target</code>.</li>
<li><strong><code>srand([expr])</code></strong> : Initialise le générateur de nombres aléatoires avec <code>expr</code> ou l'heure actuelle.</li>
<li><strong><code>rand()</code></strong> : Renvoie un nombre aléatoire entre 0 et 1.</li>
</ul>
<h2 id="regex">Regex</h2>
<p>Cours global regex</p>
<h3 id="regex-sur-unix">Regex sur Unix</h3>
<p>sur awk
sur grep
sur sed</p>
<h3 id="regex-en-python">Regex en Python</h3>
<h3 id="regex-en-perl">Regex en Perl</h3>
<h3 id="regex-en-ruby">Regex en Ruby</h3>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "search.highlight", "search.suggest", "navigation.top", "content.code.copy", "navigation.sections", "navigation.indexes", "navigation.tracking", "navigation.path"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>